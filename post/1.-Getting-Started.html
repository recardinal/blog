<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/blog/_next/static/css/0474faf617ff87a4.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/0474faf617ff87a4.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/blog/_next/static/chunks/webpack-fa01b6603f9cb0a2.js" defer=""></script><script src="/blog/_next/static/chunks/framework-ae4f43955bfa5ddc.js" defer=""></script><script src="/blog/_next/static/chunks/main-8da1bd074012dab6.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-af8dad07f2bd2894.js" defer=""></script><script src="/blog/_next/static/chunks/pages/post/1.-Getting-Started-e1e628bc6839b429.js" defer=""></script><script src="/blog/_next/static/axbfZ5c0qc_dLFWY4RkZ5/_buildManifest.js" defer=""></script><script src="/blog/_next/static/axbfZ5c0qc_dLFWY4RkZ5/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex"><aside class="w-64 pr-8 shrink-0"><div class="sticky top-0"><div class="relative"><button class="w-full h-9 white-space bg-gray-100 rounded-lg" id="headlessui-listbox-button-:R1im:" type="button" aria-haspopup="true" aria-expanded="false"></button></div><ul><li title="CH03 Common Programming Concepts" class="whitespace-nowrap overflow-hidden text-ellipsis"><a href="/blog/post/CH03-Common-Programming-Concepts">CH03 Common Programming Concepts</a></li><li title="CH02 Programming a Guessing Game" class="whitespace-nowrap overflow-hidden text-ellipsis"><a href="/blog/post/CH02-Programming-a-Guessing-Game">CH02 Programming a Guessing Game</a></li><li title="CH01 Getting Started" class="whitespace-nowrap overflow-hidden text-ellipsis"><a href="/blog/post/CH01-Getting-Started">CH01 Getting Started</a></li></ul></div></aside><main class="flex-1"><p><a href="https://doc.rust-lang.org/book/ch01-00-getting-started.html">https://doc.rust-lang.org/book/ch01-00-getting-started.html</a></p>
<h2 class="text-3xl">1.1 安装</h2>
<h3>在 macOs 安装</h3>
<pre><code class="language-shell">$ curl --proto &#x27;=https&#x27; --tlsv1.2 https://sh.rustup.rs -sSf | sh
</code></pre>
<h3>更新、卸载、 版本</h3>
<p>更新：</p>
<pre><code class="language-shell">$ rustup update
</code></pre>
<p>卸载：</p>
<pre><code class="language-shell">$ rustup self uninstall
</code></pre>
<p>版本查看：</p>
<pre><code class="language-shell">$ rustc --version
</code></pre>
<h3>本地文档</h3>
<pre><code class="language-shell">$ rustup doc
</code></pre>
<h2 class="text-3xl">1.2 经典 Hello, World!</h2>
<h3>创建一个项目文件夹</h3>
<pre><code class="language-shell">$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
</code></pre>
<h3>编写和运行一个 rust 程序</h3>
<p>rust 文件使用 .rs 后缀，如果使用多个词，推荐使用下划线分割，如 hello_world。
创建一个 main.rs 文件：</p>
<pre><code class="language-rust">fn main() {
    println!(&quot;Hello, world!&quot;);
}
</code></pre>
<p>编译和运行：</p>
<pre><code class="language-shell">$ rustc main.rs
$ ./main
</code></pre>
<p>会输出Hello, World！</p>
<h3>剖析</h3>
<p>上面的代码定义了一个 rust 函数， <code>main</code>函数是特殊的：它总是第一个运行的。
可以使用自动格式化工具<code>rustfmt</code>来格式化代码，安装 rust 时候已经一并安装了。
rust 的缩进是使用4个空格，而不是tab。
<code>println!</code> 调用了一个 rust macro。调用函数则是<code>println</code>，没有<code>!</code>（会在19章介绍<code>!</code>，所以是什么呢）。</p>
<h2 class="text-3xl">1.3 Hello, Cargo!</h2>
<p>Cargo 是 Rust 的构建系统和包管理器</p>
<h3>用 Cargo 创建一个项目</h3>
<p>运行命令行：</p>
<pre><code>$ cargo new hello_cargo
$ cd hello_cargo
</code></pre>
<p>默认会初始化git，使用<code>--vcs=none</code>flag去除版本控制，或者使用别的版本控制工具。
文件 <em>Cargo.toml</em> ：</p>
<pre><code class="language-toml">[package]
name = &quot;hello_cargo&quot;
version = &quot;0.1.0&quot;
authors = [&quot;Your Name &lt;you@example.com&gt;&quot;]
edition = &quot;2018&quot;

[dependencies]
</code></pre>
<p>文件 <em>src/main.rs</em>：</p>
<pre><code class="language-rust">fn main() {
    println!(&quot;Hello, world!&quot;);
}
</code></pre>
<h3>构建和运行一个 Cargo 项目</h3>
<p>运行命令行：</p>
<pre><code class="language-shell">$ cargo build
   Compiling hello_cargo v0.1.0 (file:///projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 2.85 secs
</code></pre>
<p>这条命令在 <em>target/debug/hello_cargo</em> 创建了一个可运行文件。
运行这个文件：</p>
<pre><code class="language-shell">$ ./target/debug/hello_cargo # or .\target\debug\hello_cargo.exe on Windows
Hello, world!
</code></pre>
<p>第一次运行<code>cargo build</code>也会在顶层创建一个 <em>Cargo.lock</em> 的文件（类似<code>yarn.lock</code>？记录依赖的版本）。
使用<code>cargo run</code>可以直接编译完成后运行：</p>
<pre><code class="language-shell">$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.0 secs
     Running `target/debug/hello_cargo`
Hello, world!
</code></pre>
<p>因为未作修改，Cargo 会直接运行编译文件。
Cargo 还有个命令叫<code>cargo check</code>，会检查代码确保编译了，但是不会生成可执行文件：</p>
<pre><code class="language-shell">$ cargo check
   Checking hello_cargo v0.1.0 (file:///projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 0.32 secs
</code></pre>
<p>通常，<code>cargo check</code>比<code>cargo build</code>快得多，编写程序时使用<code>cargo check</code>确保编译，准备运行时再使用<code>cargo build</code>。</p>
<h3>构建发布</h3>
<p>使用<code>cargo build --release</code>编译优化。会在 <em>target/release</em> 而不是 <em>target/debug</em> 创建可执行文件。这个优化会加快 Rust 代码的运行速度，相对打包时间会变长。</p></main><nav class="shrink-0 w-64"><ul><li>1.1 安装</li><li>在 macOs 安装</li><li>更新、卸载、 版本</li><li>本地文档</li><li>1.2 经典 Hello, World!</li><li>创建一个项目文件夹</li><li>编写和运行一个 rust 程序</li><li>剖析</li><li>1.3 Hello, Cargo!</li><li>用 Cargo 创建一个项目</li><li>构建和运行一个 Cargo 项目</li><li>构建发布</li></ul></nav></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"headings":[{"title":"1.1 安装","depth":"2"},{"title":"在 macOs 安装","depth":"3"},{"title":"更新、卸载、 版本","depth":"3"},{"title":"本地文档","depth":"3"},{"title":"1.2 经典 Hello, World!","depth":"2"},{"title":"创建一个项目文件夹","depth":"3"},{"title":"编写和运行一个 rust 程序","depth":"3"},{"title":"剖析","depth":"3"},{"title":"1.3 Hello, Cargo!","depth":"2"},{"title":"用 Cargo 创建一个项目","depth":"3"},{"title":"构建和运行一个 Cargo 项目","depth":"3"},{"title":"构建发布","depth":"3"}]},"__N_SSG":true},"page":"/post/1.-Getting-Started","query":{},"buildId":"axbfZ5c0qc_dLFWY4RkZ5","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>